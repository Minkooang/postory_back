<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jungsuk_2_1.postory.dao.PostLikeDao">

    <select id="isLiked" parameterType="map" resultType="java.lang.Boolean">
        SELECT EXISTS (
                       SELECT 1
                       FROM post_like AS pl
                                LEFT JOIN post AS p ON pl.POST_ID = p.POST_ID
                                LEFT JOIN user AS u ON u.USER_ID = pl.USER_ID
                       WHERE p.post_id = #{postId}
                         AND u.nic = #{nic}
                   )
    </select>
</mapper>